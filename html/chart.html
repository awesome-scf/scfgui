<!DOCTYPE html>
<html>

<head>
  <title>日志列表</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./css/uikit.css">


  <link rel="stylesheet" href="../assets/css/styles.op-app.css">

  <link rel="stylesheet" href="../assets/vendor/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/vendor/bootstrap/offcanvas.css">

  <link rel="stylesheet" href="../assets/vendor/icon-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../assets/vendor/icon-line/css/simple-line-icons.css">
  <link rel="stylesheet" href="../assets/vendor/icon-etlinefont/style.css">
  <link rel="stylesheet" href="../assets/vendor/icon-line-pro/style.css">
  <link rel="stylesheet" href="../assets/vendor/icon-hs/style.css">
  <link rel="stylesheet" href="../assets/vendor/dzsparallaxer/dzsparallaxer.css">
  <link rel="stylesheet" href="../assets/vendor/dzsparallaxer/dzsscroller/scroller.css">
  <link rel="stylesheet" href="../assets/vendor/dzsparallaxer/advancedscroller/plugin.css">
  <link rel="stylesheet" href="../assets/vendor/animate.css">
  <link rel="stylesheet" href="../assets/vendor/custombox/custombox.min.css">

  <link rel="stylesheet" href="../assets/vendor/hamburgers/hamburgers.min.css">
  <link rel="stylesheet" href="../assets/vendor/malihu-scrollbar/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/vendor/slick-carousel/slick/slick.css">
  <link rel="stylesheet" href="../assets/vendor/fancybox/jquery.fancybox.css">


  <link rel="stylesheet" href="../assets/css/unify-core.css">
  <link rel="stylesheet" href="../assets/css/unify-components.css">
  <link rel="stylesheet" href="../assets/css/unify-globals.css">
  <link rel="stylesheet" href="../assets/vendor/cubeportfolio-full/cubeportfolio/css/cubeportfolio.min.css">

  <link rel="stylesheet" href="./css/jquery.jsonview.css" />

  <link rel="stylesheet" href="../assets/jquery/jquery-ui.css">
  <link rel="stylesheet" href="../assets/jquery/style.css">
  <link rel="stylesheet" href="./css/load.css">
  <link rel="stylesheet" href="./css/loadline.css">


  <style>
    html,
    body {
      height: 100%;
    }
  </style>
</head>

<body id="bbody" class="g-bg-secondary">

  <main id="main" class="g-color-black g-height-100vh">

    <div class="w-100 text-center" v-if="loading">
      <div class="lds-roller g-mt-140">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>


    <div style="display: none;" v-show="!loading">

      <header id="headertop" class="u-header u-header--toggle-section u-header--change-appearance"
        data-header-fix-moment="300" style="z-index: 999;">
        <div
          class="u-header__section u-header__section--light u-header__section--dark g-bg-gray-dark-v3 g-transition-0_3 g-py-10 ">
          <div class="g-mx-50">

            <div
              class="row flex-column flex-sm-row justify-content-between align-items-center text-uppercase g-font-weight-600 g-color-white g-font-size-12 g-mx-0--lg">

              <div class="col-auto d-flex ">

                <a class="btn text-center g-color-white g-mr-20 " href="addfunction.html">
                  <i class="fa fa-plus g-font-size-18 g-valign-middle  g-mr-10 g-mt-minus-2"></i>
                  <div>新增云函数</div>
                </a>

                <a class="btn text-center   g-mr-20 g-color-white" href="invoke.html">
                  <i class="fa fa-bug g-font-size-18 g-valign-middle g-mr-10 g-mt-minus-2"></i>
                  <div>云函数调试</div>
                </a>

                <a class="btn text-center g-mr-20  g-color-white" href="listfunction.html">
                  <i class="fa fa-list-ul g-font-size-18 g-valign-middle g-mr-10 g-mt-minus-2"></i>
                  <div>函数列表</div>
                </a>

                <a class="btn text-center  g-color-white" href="listlog.html">
                  <i class="fa fa-files-o g-font-size-18 g-valign-middle g-mr-10 g-mt-minus-2"></i>
                  <div>执行日志</div>
                </a>

              </div>

              <div class="col-auto">
                <div class="text-center g-color-white d-flex">
                  <!-- <i class="fa fa-plus g-font-size-18 g-valign-middle  g-mr-10"></i> -->
                  <!-- 项目切换 -->
                  <button type="button" class="btn g-bg-transparent g-color-white dropdown-toggle g-font-weight-400"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {{chkProject.name}}
                  </button>
                  <div class="dropdown-menu">
                    <a class="dropdown-item g-py-10" href="#!" v-for="pro in projects"
                      @click="changeProject(pro.id)">{{pro.name}}</a>
                  </div>
                </div>
              </div>

              <div class="col-auto d-flex">

                <a class="btn text-center g-color-gray-dark-v3 g-mr-20 " href="#!">
                  <i class="fa fa-plus g-font-size-18 g-valign-middle  g-mr-10 g-mt-minus-2"></i>
                  <div>新增云函数</div>
                </a>

                <a class="btn text-center   g-mr-20 g-color-orange" href="#!">
                  <i class="fa fa-pie-chart g-font-size-18 g-valign-middle g-mr-10 g-mt-minus-2"></i>
                  <div>运维图表</div>
                </a>


                <a class="btn text-center g-mr-20 g-color-white " href="set.html">
                  <i class="fa fa-cog g-font-size-18 g-valign-middle g-mr-10 g-mt-minus-2"></i>
                  <div>项目配置</div>
                </a>

                <a class="btn text-center g-color-white" href="list.html">
                  <i class="fa fa-th-large g-font-size-18 g-valign-middle  g-mr-10 g-mt-minus-2"></i>
                  <div>退出登录</div>
                </a>

              </div>

            </div>
          </div>
        </div>
      </header>




      <section id="appScreens" class="">

        <div class="d-flex justify-content-between g-brd-gray-light-v4 g-brd-bottom g-pt-50 g-bg-white g-px-30">

          <div class="form-group col-2">
            <label class="g-mb-10" for="inputGroup1_1">执行类型</label>
            <div class="w-100">
              <select class="custom-select  form-control-lg rounded-0 w-100" v-model="queryCon.retCode"
                :disabled="queryCon.functionRequestId!=''">
                <option value="">全部</option>
                <option value="not0">失败</option>
                <option value="is0">成功</option>
                <option value="TimeLimitExceeded">超时</option>
                <option value="ResourceLimitExceeded">资源超限</option>
                <option value="UserCodeException">代码异常</option>
              </select>
            </div>
          </div>



          <div class="form-group col-2">

            <label class="g-mb-10" for="inputGroup1_1">命名空间</label>
            <i class="fa fa-spin fa-spinner" v-if="loadNS"></i>
            <div>
              <select class="custom-select form-control-lg rounded-0 w-100" v-model="queryCon.namespace"
                @change="changeNamespace" :disabled="queryCon.functionRequestId!=''">
                <option value="">全部</option>
                <option :value="ns.Name" v-for="ns in namespaces">{{ns.Name}}</option>
              </select>
            </div>
          </div>

          <div class="form-group col-2">
            <label class="g-mb-10" for="inputGroup1_1">SCF函数</label>
            <i class="fa fa-spin fa-spinner" v-if="loadFN"></i>
            <div>
              <select class="custom-select  form-control-lg rounded-0 w-100" v-model="queryCon.functionName"
                :disabled="queryCon.functionRequestId!=''">
                <option value="" selected>全部</option>
                <option :value="ns.FunctionName" v-for="ns in functions">{{ns.FunctionName}}</option>
              </select>
            </div>
          </div>

          <div class="form-group col-2">
            <label class="g-mb-10" for="inputGroup1_1">起始时间</label>
            <input class="form-control rounded-0 form-control-md w-100" type="datetime-local"
              v-model="queryCon.startTime" :disabled="queryCon.functionRequestId!=''" :min="queryCon.lastTime"
              @change="changeStartTime">
            <small>SCF日志仅保留1个自然月</small>
          </div>

          <div class="form-group col-2">
            <label class="g-mb-10" for="inputGroup1_1">终止时间</label>
            <input class="form-control rounded-0 form-control-md w-100" type="datetime-local" v-model="queryCon.endTime"
              :disabled="queryCon.functionRequestId!=''" @change="changeEndTime">
            <small>日期间隔只能为一天</small>
          </div>



          <div class="form-group">
            <label class="g-mb-10" for="inputGroup1_1" style="color:#fafafa">1</label>
            <div>
              <button href="#!" class="btn btn-md u-btn-primary g-mr-10 g-mb-15 rounded-0" @click="queryLog">
                <i class="fa fa-spin fa-spinner" v-if="queryCon.loading"></i>
                <i class="fa fa-search" v-if="!queryCon.loading"></i>
                查询</button>
            </div>
          </div>
        </div>

        <div class="g-pos-rel  g-px-30 g-py-30">
          <div class="row ">

            <div class="col-1"></div>

            <div class="col-10">

              <div class="progress  g-height-20 rounded-0 g-overflow-visible g-mb-20 " v-if="queryCon.loading">
                <div class="progress-bar g-height-20 progress-bar-striped progress-bar-animated" role="progressbar"
                  aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
              </div>

              <div class="progress g-height-20 rounded-0 g-overflow-visible g-mb-20" v-if="!queryCon.loading">
                <div class="progress-bar progress-bar-striped  g-pos-rel" role="progressbar"
                  :style="'width: '+perLog+'%;'" :aria-valuenow="perLog" :class="{'progress-bar-animated':queryCon.showProAnimated}"
                  aria-valuemin="0" aria-valuemax="100">
                  <div class="text-center   u-progress__pointer-v2 g-font-size-11 g-color-white g-bg-primary">
                    {{perLog}}%, {{logCount.show}}/{{logCount.total}}</div>
                </div>
              </div>
            </div>

            <div class="col-1" v-if="perLog!=100">
              <a id="stoplog" href="#!" title="停止拉取日志"  @click="stopGetLog" v-if="queryCon.showProAnimated">
                <i  class="infolog fa fa-stop g-color-primary"></i></a>
              <a href="#!" id="continuelog" title="继续拉取日志" @click="continueGetLog"  v-if="!queryCon.showProAnimated">
                <i  class="infolog fa fa-play g-color-gray-dark-v1"></i></a>
            </div>


            <div class="col-12">
              <!-- 单个函数时间曲线图 -->
              <div id="timeline" class="w-100" style="height:400px;"></div>
            </div>
            <div class="col-6">
              <!-- 函数总时间对比图 -->
              <div id="totaltime" class="w-100" style="height:400px;"></div>
            </div>
            <div class="col-6">
              <!-- 函数平均时间对比图 -->
              <div id="avgtime" class="w-100" style="height:400px;"></div>
            </div>

            <div class="col-12">
              <!-- 函数执行一次时间解析图 -->
              <div id="onetime" class="w-100" style="height:400px;"></div>
            </div>

            <div class="col-12">
              <!-- 函数执行次数对比图 -->
              <div id="counttime" class="w-100" style="height:400px;"></div>
            </div>

          </div>
        </div>

      </section>




    </div>


  </main>


  <script>
    const { dialog, shell } = require('electron').remote

    window.nodeRequire = require;
    delete window.require;
    delete window.exports;
    delete window.module;



  </script>

  <script src="../assets/vendor/jquery/jquery.min.js"></script>
  <script src="../assets/vendor/jquery-migrate/jquery-migrate.min.js"></script>

  <script src="../assets/vendor/popper.min.js"></script>
  <script src="../assets/vendor/bootstrap/bootstrap.min.js"></script>

  <script src="../assets/vendor/bootstrap/offcanvas.js"></script>


  <script src="../assets/vendor/dzsparallaxer/dzsparallaxer.js"></script>
  <script src="../assets/vendor/dzsparallaxer/dzsscroller/scroller.js"></script>
  <script src="../assets/vendor/dzsparallaxer/advancedscroller/plugin.js"></script>
  <script src="../assets/vendor/masonry/dist/masonry.pkgd.min.js"></script>
  <script src="../assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="../assets/vendor/malihu-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/vendor/slick-carousel/slick/slick.js"></script>
  <script src="../assets/vendor/fancybox/jquery.fancybox.min.js"></script>

  <script src="../assets/js/hs.core.js"></script>
  <script src="../assets/js/components/hs.header.js"></script>
  <script src="../assets/js/helpers/hs.hamburgers.js"></script>
  <script src="../assets/js/components/hs.dropdown.js"></script>
  <script src="../assets/js/components/hs.scrollbar.js"></script>
  <script src="../assets/js/components/hs.popup.js"></script>
  <script src="../assets/js/components/hs.carousel.js"></script>
  <script src="../assets/js/components/hs.go-to.js"></script>
  <script src="../assets/vendor/custombox/custombox.min.js"></script>
  <script src="../assets/js/components/hs.modal-window.js"></script>


  <script src="../vue.js"></script>
  <script src="../assets/vendor/cubeportfolio-full/cubeportfolio/js/jquery.cubeportfolio.min.js"></script>
  <script src="../assets/js/components/hs.cubeportfolio.js"></script>

  <script src="../assets/jquery/jquery-ui.js"></script>

  <script src="../assets/vendor/jquery-ui/ui/widgets/datepicker.js"></script>
  <script src="../assets/js/components/hs.datepicker.js"></script>


  <script type="text/javascript" src="./js/jquery.jsonview.js"></script>
  <script src="./js/echarts.min.js"></script>

  <script src="./js/chart.js"></script>
  <script src="./js/uikit.js"></script>


  <script>
    $(document).on('click', 'a[href^="http"]', function (event) {
      event.preventDefault();
      shell.openExternal(this.href);
    });


    $(window).on('load', function () {
      
    });
  </script>

</body>

</html>